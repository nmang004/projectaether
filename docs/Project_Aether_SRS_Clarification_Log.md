# Project Aether: SRS Clarification Log

**Generated by:** Senior Software Engineer  
**Date:** July 3, 2025  
**Purpose:** Identify ambiguities, unstated assumptions, technical risks, and business logic gaps requiring stakeholder clarification before Phase 1 development begins.

---

## Critical Questions & Ambiguities

### Crawler System (FR-1)

| Requirement | Question/Ambiguity | Impact | Clarification Needed |
|-------------|-------------------|---------|---------------------|
| **SRS 3.1** | What is the exact crawl politeness policy? No delay/rate limit specifications provided. | Risk of being blacklisted by client sites, rendering crawling unusable | Define crawl delays (e.g., 1 req/sec), user-agent rotation, robots.txt policies |
| **AC 1.2** | How to handle JavaScript-rendered content requiring interaction (infinite scroll, etc.)? | Could miss 50%+ of site content, leading to inaccurate audits | Define interaction rules: max scroll depth, button clicks, wait times |
| **AC 1.4** | What constitutes "graceful" error handling? Failed vs Completed with errors? | Unclear failure states confuse users about data validity | Define thresholds: >20% failed = Failed status, <20% = Completed with warnings |

### Backlink Analysis (FR-3)

| Requirement | Question/Ambiguity | Impact | Clarification Needed |
|-------------|-------------------|---------|---------------------|
| **SRS 3.3** | Which backlink provider? (Ahrefs, Semrush, DataForSEO) | Wrong choice requires complete rewrite. Cost varies $500-$5000/month | Immediate decision on provider + fallback strategy |
| **AC 3.1** | How to validate user API keys? Handle expiration/rate limits? | Invalid keys cause failures, poor UX, difficult debugging | Implement validation endpoint, usage tracking, clear error messages |

### SERP Analysis (FR-5)

| Requirement | Question/Ambiguity | Impact | Clarification Needed |
|-------------|-------------------|---------|---------------------|
| **SRS 3.5** | Timeout policies for scraping top 10 URLs? | Long timeouts (>30s) = unusable. Short (<5s) = miss content | 10s per-page timeout, 60s total. Flag partial data if >3 failures |
| **AC 5.3** | If DataForSEO fails, does entire feature fail? | 99.5% uptime = 3.6 hours downtime/month | Implement cache fallback, manual URL input, secondary provider |

### AI Content Generation (FR-6)

| Requirement | Question/Ambiguity | Impact | Clarification Needed |
|-------------|-------------------|---------|---------------------|
| **AC 6.3** | How to "fix" invalid JSON from LLM? | LLMs produce malformed JSON 5-10% of time. Bad fixes = security risks | Strict validation, specific fix patterns, max 2 attempts, log all fixes |

### Internal Linking (FR-7)

| Requirement | Question/Ambiguity | Impact | Clarification Needed |
|-------------|-------------------|---------|---------------------|
| **SRS 3.7** | What defines "project" scope? Sites with 100k+ pages? | Undefined boundaries = analyzing entire domain. 100k pages = $1000s in costs | Define scope options: domain/subdomain/path. Limit 10k pages V1 |
| **AC 7.3** | How to detect existing links? Parse HTML or use crawl data? | HTML = accurate but slow. Crawl data = fast but misses dynamic links | Use crawl data initially, option for deep-scan specific pages |

---

## System Architecture & Infrastructure

### Authentication & Security

| Area | Concern | Impact | Action Required |
|------|---------|--------|-----------------|
| **SSO Integration** | Is Google Workspace SSO required for V1? | SSO adds 2-4 weeks. Without it, need password flows, 2FA | Get explicit V1 requirement. Define password policies if no SSO |
| **LLM Security** | How to sanitize LLM-generated content? | LLM could generate XSS payloads in schema markup | Implement CSP, DOMPurify sanitization, validation layer |
| **Data Residency** | All infrastructure in us-east-1. GDPR compliance? | EU data in US violates GDPR. Fines up to â‚¬20M | Clarify requirements, consider multi-region or no PII storage |

### Performance & Scaling

| Area | Concern | Impact | Action Required |
|------|---------|--------|-----------------|
| **AI Endpoints** | P95 <15s seems optimistic with Bedrock latency | Bedrock can have 30-60s spikes. Users won't wait | 30s timeout, graceful degradation, streaming, "quick mode" fallback |
| **Auto-scaling** | What triggers scaling? Queue depth, CPU, memory? | Wrong metric = wasted resources or poor performance | Scale on queue >100 tasks. 2-20 workers. 70% CPU/80% memory triggers |
| **Data Retention** | No policy specified for crawl/SERP/content data | Unlimited storage = exponentially growing costs | 90-day crawl/SERP retention, 1-year content, automated cleanup |

### Cost Management

| Area | Concern | Impact | Action Required |
|------|---------|--------|-----------------|
| **Budget Limits** | No hard limits per user/project specified | One user could generate $10k in API costs | Implement $50/user/day, $500/project/month limits with alerts |
| **API Keys** | Shared platform keys or user-specific? | Shared keys = one user blocks everyone | Per-user rate limiting: 100 req/hour, queue batching |
| **Cost Tracking** | Multiple metered APIs with no unified tracking | Could lose money per request without knowing | Unified cost tracking service, automated alerts, prepaid credits |

---

## Technical Implementation

### Database & Storage

| Component | Issue | Risk | Solution |
|-----------|-------|------|----------|
| **JSONB Queries** | No indexing strategy for JSONB fields | 10-100x slower queries on large datasets | Define schemas, create GIN indexes on frequently queried paths |
| **Migrations** | No rollback plan for database changes | Failed deployment = potential data loss | Blue-green deployment, tested rollback scripts, feature flags |

### Monitoring & Operations

| Component | Issue | Risk | Solution |
|-----------|-------|------|----------|
| **Logging** | CloudWatch mentioned but no specifics | Flying blind, issues persist for hours | 30-day retention, define metrics, set alert thresholds |
| **Testing** | Only unit test coverage mentioned | Won't catch scalability, security issues | Add performance tests, security scanning, chaos engineering |

---

## Strategic Concerns

### Vendor Lock-in
- **Risk:** Heavy AWS dependency (Bedrock, CDK, AWS services)
- **Impact:** Difficult migration, pricing vulnerability
- **Mitigation:** Abstract AI interface, use Terraform, keep core cloud-agnostic

### Development Velocity
- **Risk:** 5 phases with no MVP scope defined
- **Impact:** 6-12 month timeline, competitors launch first
- **Mitigation:** Define 3-module MVP, 2-3 month launch, iterate

### Maintenance Burden
- **Risk:** Complex architecture, 7 modules, many dependencies
- **Impact:** 80% time on maintenance vs features
- **Mitigation:** Start monolithic, extract services as needed

---

## Immediate Actions Required

1. **Schedule stakeholder meeting** - Review all "immediate decision" items
2. **Create proof-of-concepts** - Crawler rate limiting, LLM JSON fixing
3. **Get legal review** - Data residency and GDPR compliance
4. **Finalize API providers** - Complete contract negotiations
5. **Define MVP scope** - Enable faster time-to-market

---

## Project Initialization

```bash
# Create complete directory structure for Project Aether
mkdir -p ~/Documents/Coding/aether && cd ~/Documents/Coding/aether && \
mkdir -p backend/{app/{api,core,models,services,tasks},tests,alembic} \
         frontend/{src/{components,pages,hooks,services,stores},tests} \
         infrastructure/{cdk,docker} \
         docs
```

This creates the directory structure following the architectural patterns defined in the SRS and Development Plan.